# CPU模块实例化清单

以下是在 `cpu.v` 模块中直接实例化的所有模块及其输入输出端口详细信息：

## 2. PipeIF (指令获取阶段模块)

### 输入端口：
- **pc[31:0]** - 当前程序计数器值
- **cpc[31:0]** - CP0控制寄存器提供的PC值
- **bpc[31:0]** - 分支指令计算的PC值
- **rpc[31:0]** - 返回指令的PC值
- **jpc[31:0]** - 跳转指令的PC值
- **pcsource[2:0]** - PC源选择信号

### 输出端口：
- **npc[31:0]** - 下一个程序计数器值
- **pc4[31:0]** - 当前PC+4的值
- **instruction[31:0]** - 从指令存储器获取的指令

### 用途：
根据程序计数器获取指令，计算下一个PC值

## 3. PipeIR (指令寄存器模块)

### 输入端口：
- **clk** - 时钟信号
- **rstn** - 异步复位信号（低电平有效）
- **pc4[31:0]** - PC+4值（来自IF阶段）
- **instruction[31:0]** - 从指令存储器获取的指令
- **nostall** - 不暂停信号（流水线控制）

### 输出端口：
- **Dpc4[31:0]** - 传递给ID阶段的PC+4值
- **Dinstruction[31:0]** - 传递给ID阶段的指令

### 用途：
锁存指令获取阶段的PC+4和指令，传递给译码阶段

## 4. PipeID (指令译码阶段模块)

### 输入端口：
- **clk** - 时钟信号
- **rstn** - 异步复位信号（低电平有效）
- **pc4[31:0]** - PC+4值
- **inst[31:0]** - 指令输入
- **Ealu[31:0]** - EX阶段的ALU结果
- **Malu[31:0]** - MEM阶段的ALU结果
- **Mdm[31:0]** - MEM阶段的数据内存结果
- **Ehi[31:0]** - EX阶段的HI寄存器值
- **Elo[31:0]** - EX阶段的LO寄存器值
- **Epc0[31:0]** - EX阶段的CP0值
- **Emuler_hi[31:0]** - EX阶段乘法高32位结果
- **Emuler_lo[31:0]** - EX阶段乘法低32位结果
- **Er[31:0]** - EX阶段除法余数
- **Eq[31:0]** - EX阶段除法商
- **Ecounter[31:0]** - EX阶段计数器结果
- **Ern[4:0]** - EX阶段目标寄存器编号
- **Mrn[4:0]** - MEM阶段目标寄存器编号
- **Ew_rf** - EX阶段写寄存器文件标志
- **Mw_rf** - MEM阶段写寄存器文件标志
- **Ew_hi** - EX阶段写HI标志
- **Ew_lo** - EX阶段写LO标志
- **Erfsource[2:0]** - EX阶段寄存器文件源选择
- **Mrfsource[2:0]** - MEM阶段寄存器文件源选择
- **Ehisource[1:0]** - EX阶段HI源选择
- **Elosource[1:0]** - EX阶段LO源选择
- **Wdata_rf[31:0]** - 写入寄存器文件的数据
- **Wrn[4:0]** - 写入寄存器编号
- **Wena_rf** - 写入寄存器文件使能
- **Wena_hi** - 写入HI使能
- **Wena_lo** - 写入LO使能
- **EisGoto** - EX阶段跳转指令标志

### 输出端口：
- **cpc[31:0]** - CP0寄存器输出
- **rpc[31:0]** - 寄存器PC输出
- **bpc[31:0]** - 分支PC输出
- **jpc[31:0]** - 跳转PC输出
- **Rsout[31:0]** - 寄存器Rs输出
- **Rtout[31:0]** - 寄存器Rt输出
- **imm[31:0]** - 立即数输出
- **Dpc4[31:0]** - D阶段PC+4输出
- **CP0out[31:0]** - CP0输出
- **Hiout[31:0]** - HI寄存器输出
- **Loout[31:0]** - LO寄存器输出
- **rn[4:0]** - 目标寄存器编号输出
- **sign** - 符号扩展标志输出
- **div** - 除法操作标志输出
- **aluc[3:0]** - ALU操作码输出
- **w_hi** - 写HI标志输出
- **w_lo** - 写LO标志输出
- **w_rf** - 写寄存器文件标志输出
- **w_dm** - 写数据存储器标志输出
- **asource** - A源选择输出
- **bsource** - B源选择输出
- **cuttersource[1:0]** - 数据切割源选择输出
- **hisource[1:0]** - HI源选择输出
- **losource[1:0]** - LO源选择输出
- **rfsource[2:0]** - 寄存器文件源选择输出
- **pcsource[1:0]** - PC源选择输出
- **SC[1:0]** - 存储器命令信号输出
- **LC[2:0]** - 加载命令信号输出
- **stall** - 流水线暂停信号输出
- **isGoto** - 跳转指令标志输出
- **reg28[31:0]** - 特殊寄存器输出（可能是$gp寄存器）

### 用途：
译码指令，读取寄存器文件，处理数据前递和控制信号

## 5. PipeDEreg (ID/EX流水线寄存器模块)

### 输入端口：
- **clk** - 时钟信号
- **rstn** - 异步复位信号（低电平有效）
- **wena** - 写使能信号
- **Dpc4[31:0]** - PC+4值（来自ID阶段）
- **Da[31:0]** - 寄存器A的值
- **Db[31:0]** - 寄存器B的值
- **Dimm[31:0]** - 立即数
- **Dcp0[31:0]** - CP0相关数据
- **Dhi[31:0]** - HI寄存器值
- **Dlo[31:0]** - LO寄存器值
- **Drn[4:0]** - 目标寄存器编号
- **Dsign** - 符号扩展标志
- **Ddiv** - 除法操作标志
- **Daluc[3:0]** - ALU操作码
- **Dw_rf** - 写寄存器文件标志
- **Dw_hi** - 写HI标志
- **Dw_lo** - 写LO标志
- **Dw_dm** - 写数据存储器标志
- **DisGoto** - 跳转指令标志
- **Dasource** - A源选择标志
- **Dbsource** - B源选择标志
- **Dhisource[1:0]** - HI源选择
- **Dlosource[1:0]** - LO源选择
- **Drfsource[2:0]** - 寄存器文件源选择
- **DSC[1:0]** - 存储器命令信号
- **DLC[2:0]** - 加载命令信号

### 输出端口：
- **Epc4[31:0]** - PC+4值（传给EXE阶段）
- **Ea[31:0]** - 寄存器A的值（传给EXE阶段）
- **Eb[31:0]** - 寄存器B的值（传给EXE阶段）
- **Eimm[31:0]** - 立即数（传给EXE阶段）
- **Ecp0[31:0]** - CP0相关数据（传给EXE阶段）
- **Ehi[31:0]** - HI寄存器值（传给EXE阶段）
- **Elo[31:0]** - LO寄存器值（传给EXE阶段）
- **Ern[4:0]** - 目标寄存器编号（传给EXE阶段）
- **Esign** - 符号扩展标志（传给EXE阶段）
- **Ediv** - 除法操作标志（传给EXE阶段）
- **Ealuc[3:0]** - ALU操作码（传给EXE阶段）
- **Ew_rf** - 写寄存器文件标志（传给EXE阶段）
- **Ew_hi** - 写HI标志（传给EXE阶段）
- **Ew_lo** - 写LO标志（传给EXE阶段）
- **Ew_dm** - 写数据存储器标志（传给EXE阶段）
- **EisGoto** - 跳转指令标志（传给EXE阶段）
- **Easource** - A源选择标志（传给EXE阶段）
- **Ebsource** - B源选择标志（传给EXE阶段）
- **Ehisource[1:0]** - HI源选择（传给EXE阶段）
- **Elosource[1:0]** - LO源选择（传给EXE阶段）
- **Erfsource[2:0]** - 寄存器文件源选择（传给EXE阶段）
- **ESC[1:0]** - 存储器命令信号（传给EXE阶段）
- **ELC[2:0]** - 加载命令信号（传给EXE阶段）

### 用途：
存储ID阶段的输出数据并传递给EXE阶段

## 6. PipeEXE (执行阶段模块)

### 输入端口：
- **clk** - 时钟信号
- **rstn** - 异步复位信号（低电平有效）
- **pc4[31:0]** - PC+4值
- **a[31:0]** - 寄存器A的值
- **b[31:0]** - 寄存器B的值
- **imm[31:0]** - 立即数
- **cp0[31:0]** - CP0相关数据
- **hi[31:0]** - HI寄存器值
- **lo[31:0]** - LO寄存器值
- **rn[4:0]** - 目标寄存器编号
- **sign** - 符号扩展标志
- **div** - 除法操作标志
- **aluc[3:0]** - ALU操作码
- **w_rf** - 写寄存器文件标志
- **w_hi** - 写HI标志
- **w_lo** - 写LO标志
- **w_dm** - 写数据存储器标志
- **isGoto** - 跳转指令标志
- **asource** - A源选择标志
- **bsource** - B源选择标志
- **hisource[1:0]** - HI源选择
- **losource[1:0]** - LO源选择
- **rfsource[2:0]** - 寄存器文件源选择
- **SC[1:0]** - 存储器命令信号
- **LC[2:0]** - 加载命令信号

### 输出端口：
- **Emuler_hi[31:0]** - 乘法高32位结果
- **Emuler_lo[31:0]** - 乘法低32位结果
- **Er[31:0]** - 除法余数
- **Eq[31:0]** - 除法商
- **Ecounter[31:0]** - 计数器结果
- **Ealu[31:0]** - ALU结果
- **Epc4[31:0]** - 传给MEM阶段的PC+4值
- **Ea[31:0]** - 传给MEM阶段的寄存器A值
- **Eb[31:0]** - 传给MEM阶段的寄存器B值
- **Ecp0[31:0]** - 传给MEM阶段的CP0相关数据
- **Ehi[31:0]** - 传给MEM阶段的HI寄存器值
- **Elo[31:0]** - 传给MEM阶段的LO寄存器值
- **Ern[4:0]** - 传给MEM阶段的目标寄存器编号
- **Ew_rf** - 传给MEM阶段的写寄存器文件标志
- **Ew_hi** - 传给MEM阶段的写HI标志
- **Ew_lo** - 传给MEM阶段的写LO标志
- **Ew_dm** - 传给MEM阶段的写数据存储器标志
- **EisGoto** - 传给MEM阶段的跳转指令标志
- **Ehisource[1:0]** - 传给MEM阶段的HI源选择
- **Elosource[1:0]** - 传给MEM阶段的LO源选择
- **Erfsource[2:0]** - 传给MEM阶段的寄存器文件源选择
- **ESC[1:0]** - 传给MEM阶段的存储器命令信号
- **ELC[2:0]** - 传给MEM阶段的加载命令信号

### 用途：
执行算术逻辑运算、乘除法运算、地址计算等

## 7. PipeEMreg (EX/MEM流水线寄存器模块)

### 输入端口：
- **clk** - 时钟信号
- **rstn** - 异步复位信号（低电平有效）
- **wena** - 写使能信号
- **Emuler_hi[31:0]** - 乘法高32位结果（来自EX阶段）
- **Emuler_lo[31:0]** - 乘法低32位结果（来自EX阶段）
- **Er[31:0]** - 除法余数（来自EX阶段）
- **Eq[31:0]** - 除法商（来自EX阶段）
- **Ecounter[31:0]** - 计数器结果（来自EX阶段）
- **Ealu[31:0]** - ALU结果（来自EX阶段）
- **Epc4[31:0]** - PC+4值（来自EX阶段）
- **Ea[31:0]** - 寄存器A的值（来自EX阶段）
- **Eb[31:0]** - 寄存器B的值（来自EX阶段）
- **Ecp0[31:0]** - CP0相关数据（来自EX阶段）
- **Ehi[31:0]** - HI寄存器值（来自EX阶段）
- **Elo[31:0]** - LO寄存器值（来自EX阶段）
- **Ern[4:0]** - 目标寄存器编号（来自EX阶段）
- **Esign** - 符号扩展标志（来自EX阶段）
- **Ew_rf** - 写寄存器文件标志（来自EX阶段）
- **Ew_hi** - 写HI标志（来自EX阶段）
- **Ew_lo** - 写LO标志（来自EX阶段）
- **Ew_dm** - 写数据存储器标志（来自EX阶段）
- **EisGoto** - 跳转指令标志（来自EX阶段）
- **Ehisource[1:0]** - HI源选择（来自EX阶段）
- **Elosource[1:0]** - LO源选择（来自EX阶段）
- **Erfsource[2:0]** - 寄存器文件源选择（来自EX阶段）
- **ESC[1:0]** - 存储器命令信号（来自EX阶段）
- **ELC[2:0]** - 加载命令信号（来自EX阶段）

### 输出端口：
- **Mmuler_hi[31:0]** - 乘法高32位结果（传给MEM阶段）
- **Mmuler_lo[31:0]** - 乘法低32位结果（传给MEM阶段）
- **Mr[31:0]** - 除法余数（传给MEM阶段）
- **Mq[31:0]** - 除法商（传给MEM阶段）
- **Mcounter[31:0]** - 计数器结果（传给MEM阶段）
- **Malu[31:0]** - ALU结果（传给MEM阶段）
- **Mpc4[31:0]** - PC+4值（传给MEM阶段）
- **Ma[31:0]** - 寄存器A的值（传给MEM阶段）
- **Mb[31:0]** - 寄存器B的值（传给MEM阶段）
- **Mcp0[31:0]** - CP0相关数据（传给MEM阶段）
- **Mhi[31:0]** - HI寄存器值（传给MEM阶段）
- **Mlo[31:0]** - LO寄存器值（传给MEM阶段）
- **Mrn[4:0]** - 目标寄存器编号（传给MEM阶段）
- **Msign** - 符号扩展标志（传给MEM阶段）
- **Mw_rf** - 写寄存器文件标志（传给MEM阶段）
- **Mw_hi** - 写HI标志（传给MEM阶段）
- **Mw_lo** - 写LO标志（传给MEM阶段）
- **Mw_dn** - 写数据存储器标志（传给MEM阶段）
- **Mhisource[1:0]** - HI源选择（传给MEM阶段）
- **Mlosource[1:0]** - LO源选择（传给MEM阶段）
- **Mrfsource[2:0]** - 寄存器文件源选择（传给MEM阶段）
- **MSC[1:0]** - 存储器命令信号（传给MEM阶段）
- **MLC[2:0]** - 加载命令信号（传给MEM阶段）

### 用途：
存储EX阶段的输出数据并传递给MEM阶段

## 8. PipeMEM (内存访问阶段模块)

### 输入端口：
- **clk** - 时钟信号
- **muler_hi[31:0]** - 乘法高32位结果
- **muler_lo[31:0]** - 乘法低32位结果
- **r[31:0]** - 除法余数
- **q[31:0]** - 除法商
- **counter[31:0]** - 计数器结果
- **alu[31:0]** - ALU结果（通常作为内存地址）
- **pc4[31:0]** - PC+4值
- **a[31:0]** - 寄存器A的值
- **b[31:0]** - 寄存器B的值（通常作为写入数据）
- **cp0[31:0]** - CP0相关数据
- **hi[31:0]** - HI寄存器值
- **lo[31:0]** - LO寄存器值
- **rn[4:0]** - 目标寄存器编号
- **w_rf** - 写寄存器文件标志
- **w_hi** - 写HI标志
- **w_lo** - 写LO标志
- **w_dm** - 写数据存储器标志
- **sign** - 符号扩展标志
- **hisource[1:0]** - HI源选择
- **losource[1:0]** - LO源选择
- **rfsource[2:0]** - 寄存器文件源选择
- **alusource[1:0]** - ALU源选择
- **SC[1:0]** - 存储器命令信号
- **LC[2:0]** - 加载命令信号

### 输出端口：
- **Mmuler_hi[31:0]** - 传递给WB阶段的乘法高32位结果
- **Mmuler_lo[31:0]** - 传递给WB阶段的乘法低32位结果
- **Mr[31:0]** - 传递给WB阶段的除法余数
- **Mq[31:0]** - 传递给WB阶段的除法商
- **Mcounter[31:0]** - 传递给WB阶段的计数器结果
- **Malu[31:0]** - 传递给WB阶段的ALU结果
- **Mdm[31:0]** - 从数据存储器读取的数据
- **Mpc4[31:0]** - 传递给WB阶段的PC+4值
- **Ma[31:0]** - 传递给WB阶段的寄存器A值
- **Mb[31:0]** - 传递给WB阶段的寄存器B值
- **Mcp0[31:0]** - 传递给WB阶段的CP0相关数据
- **Mhi[31:0]** - 传递给WB阶段的HI寄存器值
- **Mlo[31:0]** - 传递给WB阶段的LO寄存器值
- **Mrn[4:0]** - 传递给WB阶段的目标寄存器编号
- **Mw_rf** - 传递给WB阶段的写寄存器文件标志
- **Mw_hi** - 传递给WB阶段的写HI标志
- **Mw_lo** - 传递给WB阶段的写LO标志
- **Mhisource[1:0]** - 传递给WB阶段的HI源选择
- **Mlosource[1:0]** - 传递给WB阶段的LO源选择
- **Mrfsource[2:0]** - 传递给WB阶段的寄存器文件源选择
- **MSC[1:0]** - 传递给WB阶段的存储器命令信号
- **MLC[2:0]** - 传递给WB阶段的加载命令信号

### 用途：
执行数据存储器访问（加载/存储操作），处理数据读/写

## 9. PipeMWreg (MEM/WB流水线寄存器模块)

### 输入端口：
- **clk** - 时钟信号
- **rstn** - 异步复位信号（低电平有效）
- **wena** - 写使能信号
- **Mmuler_hi[31:0]** - MEM阶段乘法高32位结果
- **Muler_lo[31:0]** - MEM阶段乘法低32位结果
- **Mr[31:0]** - MEM阶段除法余数
- **Mq[31:0]** - MEM阶段除法商
- **Mcounter[31:0]** - MEM阶段计数器结果
- **Malu[31:0]** - MEM阶段ALU结果
- **Mdm[31:0]** - MEM阶段从数据存储器读取的数据
- **Mpc4[31:0]** - MEM阶段PC+4值
- **Ma[31:0]** - MEM阶段寄存器A的值
- **Mb[31:0]** - MEM阶段寄存器B的值
- **Mcp0[31:0]** - MEM阶段CP0相关数据
- **Mhi[31:0]** - MEM阶段HI寄存器值
- **Mlo[31:0]** - MEM阶段LO寄存器值
- **Mrn[4:0]** - MEM阶段目标寄存器编号
- **Mw_rf** - MEM阶段写寄存器文件标志
- **Mw_hi** - MEM阶段写HI标志
- **Mw_lo** - MEM阶段写LO标志
- **Mcuttersource[1:0]** - MEM阶段数据切割源选择
- **Mhisource[1:0]** - MEM阶段HI源选择
- **Mlosource[1:0]** - MEM阶段LO源选择
- **Mrfsource[2:0]** - MEM阶段寄存器文件源选择

### 输出端口：
- **Wmuler_hi[31:0]** - 传递给WB阶段的乘法高32位结果
- **Wmuler_lo[31:0]** - 传递给WB阶段的乘法低32位结果
- **Wr[31:0]** - 传递给WB阶段的除法余数
- **Wq[31:0]** - 传递给WB阶段的除法商
- **Wcounter[31:0]** - 传递给WB阶段的计数器结果
- **Walu[31:0]** - 传递给WB阶段的ALU结果
- **Wdm[31:0]** - 传递给WB阶段的从数据存储器读取的数据
- **Wpc4[31:0]** - 传递给WB阶段的PC+4值
- **Wa[31:0]** - 传递给WB阶段的寄存器A值
- **Wb[31:0]** - 传递给WB阶段的寄存器B值
- **Wcp0[31:0]** - 传递给WB阶段的CP0相关数据
- **Whi[31:0]** - 传递给WB阶段的HI寄存器值
- **Wlo[31:0]** - 传递给WB阶段的LO寄存器值
- **Wrn[4:0]** - 传递给WB阶段的目标寄存器编号
- **Ww_rf** - 传递给WB阶段的写寄存器文件标志
- **Ww_hi** - 传递给WB阶段的写HI标志
- **Ww_lo** - 传递给WB阶段的写LO标志
- **Wcuttersource[1:0]** - 传递给WB阶段的数据切割源选择
- **Whisource[1:0]** - 传递给WB阶段的HI源选择
- **Wlosource[1:0]** - 传递给WB阶段的LO源选择
- **Wrfsource[2:0]** - 传递给WB阶段的寄存器文件源选择

### 用途：
存储MEM阶段的输出数据并传递给WB（写回）阶段

## 10. PipeWB (写回阶段模块)

### 输入端口：
- **muler_hi[31:0]** - 乘法高32位结果
- **muler_lo[31:0]** - 乘法低32位结果
- **r[31:0]** - 除法余数
- **q[31:0]** - 除法商
- **counter[31:0]** - 计数器结果
- **alu[31:0]** - ALU结果
- **dm[31:0]** - 从数据存储器读取的数据
- **pc4[31:0]** - PC+4值
- **a[31:0]** - 寄存器A的值
- **b[31:0]** - 寄存器B的值
- **rn[4:0]** - 目标寄存器编号
- **w_rf** - 写寄存器文件标志
- **w_hi** - 写HI标志
- **w_lo** - 写LO标志
- **hisource[1:0]** - HI源选择
- **losource[1:0]** - LO源选择
- **rfsource[2:0]** - 寄存器文件源选择

### 输出端口：
- **Wdata_hi[31:0]** - 写入HI寄存器的数据
- **Wdata_lo[31:0]** - 写入LO寄存器的数据
- **Wdata_rf[31:0]** - 写入寄存器文件的数据
- **Wrn[4:0]** - 写入寄存器编号
- **Ww_rf** - 写寄存器文件使能
- **Ww_hi** - 写HI使能
- **Ww_lo** - 写LO使能

### 用途：
将执行结果写回到寄存器文件或特殊寄存器